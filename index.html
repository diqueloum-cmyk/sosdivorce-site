<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Divorce en ligne : Conseil juridique IA et avocat sp√©cialis√© | sosdivorce.fr</title>
  <meta name="description" content="Obtenez des conseils juridiques instantan√©s pour votre divorce avec notre IA sp√©cialis√©e. Acc√®s direct √† des avocats qualifi√©s √† tarif pr√©f√©rentiel." />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Poppins', sans-serif; }
    .typing-cursor { animation: blink 1s infinite; }
    @keyframes blink { 0%, 50% { opacity: 1; } 51%, 100% { opacity: 0; } }
  </style>
</head>
<body class="bg-white text-gray-800">

  <!-- Header -->
  <header class="bg-blue-900 text-white p-4">
    <div class="max-w-6xl mx-auto flex justify-between items-center">
      <div class="text-3xl font-bold">sosdivorce.fr</div>
      <nav class="hidden md:flex space-x-6">
        <a href="#about">√Ä propos</a>
        <a href="#features">Services</a>
        <a href="#pricing">Formules et tarifs</a>
        <a href="#testimonials">T√©moignages</a>
        <a href="#faq">FAQ</a>
        <a href="#contact">Contact</a>
      </nav>
      <div class="flex items-center space-x-4">
        <div id="userStatus" class="hidden text-sm">
          <span id="userName"></span>
          <button onclick="logout()" class="ml-2 text-xs bg-red-600 px-2 py-1 rounded">D√©connexion</button>
        </div>
        <button id="loginBtn" onclick="showAuthModal('login')" class="bg-green-600 px-3 py-1 rounded text-sm">Connexion</button>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <main>
  <section class="bg-blue-50 py-16 px-4">
    <div class="max-w-6xl mx-auto flex flex-col md:flex-row items-stretch gap-8">
      <div class="md:w-1/2">
        <img src="logo-sosdivorce.png" alt="sosdivorce.fr - Conseil juridique divorce en ligne" class="w-full h-full min-h-80 object-cover rounded-lg shadow-lg">
      </div>
      <div class="md:w-1/2 flex flex-col justify-center text-center">
        <h1 class="text-3xl font-bold text-blue-900 mb-4">Conseil Juridique Divorce en Ligne : IA et Avocat Sp√©cialis√©</h1>
        <p class="text-lg text-gray-600 mb-6">Obtenez des r√©ponses instantan√©es √† vos questions juridiques gr√¢ce √† notre intelligence artificielle sp√©cialis√©e.</p>
        <div class="space-y-3">
          <div class="flex items-center justify-center space-x-2">
            <span class="text-green-500">‚úì</span>
            <span>R√©ponses juridiques instantan√©es</span>
          </div>
          <div class="flex items-center justify-center space-x-2">
            <span class="text-green-500">‚úì</span>
            <span>Accompagnement confidentiel</span>
          </div>
          <div class="flex items-center justify-center space-x-2">
            <span class="text-green-500">‚úì</span>
            <span>Acc√®s direct √† un avocat qualifi√©</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Chatbot Section -->
  <section class="py-16 px-4 bg-white">
    <div class="max-w-4xl mx-auto">
      <h2 class="text-3xl font-bold text-center text-blue-900 mb-8">Conseil Juridique IA Sp√©cialis√©</h2>
      <div class="bg-gray-50 rounded-lg p-6 shadow-lg">
        <div id="chatContainer" class="space-y-4 mb-4" style="max-height: 400px; overflow-y: auto;">
          <div class="text-center text-gray-500">
            <p>Posez votre question juridique ci-dessous...</p>
            <p class="text-sm mt-2" id="questionCounter">Questions gratuites restantes : 2</p>
          </div>
        </div>
        <div class="flex space-x-2">
          <input type="text" id="userInput" placeholder="Ex: Comment proc√©der pour un divorce par consentement mutuel ?" class="flex-1 p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
          <button onclick="askGPT()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
            <span id="sendBtn">Envoyer</span>
            <span id="loadingBtn" class="hidden">Envoi...</span>
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- About Section -->
  <section id="about" class="py-16 px-4 bg-gray-50">
    <div class="max-w-6xl mx-auto">
      <h2 class="text-3xl font-bold text-center text-blue-900 mb-8">√Ä Propos de Notre Service</h2>
      <div class="text-center max-w-4xl mx-auto">
        <p class="text-lg text-gray-600 mb-6">
          Nous combinons la puissance de l'intelligence artificielle avec l'expertise de juristes sp√©cialis√©s pour vous accompagner sereinement √† chaque √©tape de votre divorce.
        </p>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section id="features" class="py-16 px-4 bg-white">
    <div class="max-w-6xl mx-auto">
      <h2 class="text-3xl font-bold text-center text-blue-900 mb-12">Nos Services</h2>
      <div class="grid md:grid-cols-3 gap-8">
        <div class="text-center p-6 bg-blue-50 rounded-lg">
          <div class="text-4xl mb-4">ü§ñ</div>
          <h3 class="text-xl font-bold text-blue-900 mb-3">IA Juridique Sp√©cialis√©e</h3>
          <p class="text-gray-600">R√©ponses instantan√©es √† vos questions sur le divorce, les proc√©dures et vos droits.</p>
        </div>
        <div class="text-center p-6 bg-green-50 rounded-lg">
          <div class="text-4xl mb-4">üë®‚Äç‚öñÔ∏è</div>
          <h3 class="text-xl font-bold text-green-900 mb-3">Avocats Qualifi√©s</h3>
          <p class="text-gray-600">Acc√®s direct √† des professionnels du droit sp√©cialis√©s en divorce √† tarif pr√©f√©rentiel.</p>
        </div>
        <div class="text-center p-6 bg-purple-50 rounded-lg">
          <div class="text-4xl mb-4">üîí</div>
          <h3 class="text-xl font-bold text-purple-900 mb-3">Confidentialit√© Totale</h3>
          <p class="text-gray-600">Vos √©changes sont s√©curis√©s et confidentiels. Nous respectons votre vie priv√©e.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Pricing Section -->
  <section id="pricing" class="py-16 px-4 bg-gray-50">
    <div class="max-w-6xl mx-auto">
      <h2 class="text-3xl font-bold text-center text-blue-900 mb-12">Formules et Tarifs</h2>
      <div class="grid md:grid-cols-3 gap-8">
        <div class="bg-white p-8 rounded-lg shadow-lg text-center">
          <h3 class="text-2xl font-bold text-blue-900 mb-4">Gratuit</h3>
          <div class="text-4xl font-bold text-blue-600 mb-6">0‚Ç¨</div>
          <ul class="space-y-3 mb-8">
            <li class="flex items-center space-x-2">
              <span class="text-green-500">‚úì</span>
              <span>2 questions IA gratuites</span>
            </li>
            <li class="flex items-center space-x-2">
              <span class="text-green-500">‚úì</span>
              <span>R√©ponses instantan√©es</span>
            </li>
          </ul>
          <button class="bg-blue-600 text-white px-6 py-3 rounded-lg w-full hover:bg-blue-700">Commencer</button>
        </div>
        <div class="bg-white p-8 rounded-lg shadow-lg text-center border-2 border-blue-600 relative">
          <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-1 rounded-full text-sm">Populaire</div>
          <h3 class="text-2xl font-bold text-blue-900 mb-4">Illimit√©</h3>
          <div class="text-4xl font-bold text-blue-600 mb-6">29‚Ç¨<span class="text-lg">/mois</span></div>
          <ul class="space-y-3 mb-8">
            <li class="flex items-center space-x-2">
              <span class="text-green-500">‚úì</span>
              <span>Questions IA illimit√©es</span>
            </li>
            <li class="flex items-center space-x-2">
              <span class="text-green-500">‚úì</span>
              <span>Acc√®s avocat pr√©f√©rentiel</span>
            </li>
            <li class="flex items-center space-x-2">
              <span class="text-green-500">‚úì</span>
              <span>Suivi personnalis√©</span>
            </li>
          </ul>
          <button onclick="showAuthModal('register')" class="bg-blue-600 text-white px-6 py-3 rounded-lg w-full hover:bg-blue-700">S'inscrire</button>
        </div>
        <div class="bg-white p-8 rounded-lg shadow-lg text-center">
          <h3 class="text-2xl font-bold text-blue-900 mb-4">Consultation</h3>
          <div class="text-4xl font-bold text-blue-600 mb-6">69‚Ç¨<span class="text-lg">/h</span></div>
          <ul class="space-y-3 mb-8">
            <li class="flex items-center space-x-2">
              <span class="text-green-500">‚úì</span>
              <span>Consultation avocat directe</span>
            </li>
            <li class="flex items-center space-x-2">
              <span class="text-green-500">‚úì</span>
              <span>Analyse de votre dossier</span>
            </li>
            <li class="flex items-center space-x-2">
              <span class="text-green-500">‚úì</span>
              <span>Conseils personnalis√©s</span>
            </li>
          </ul>
          <button class="bg-blue-600 text-white px-6 py-3 rounded-lg w-full hover:bg-blue-700">R√©server</button>
      </div>
      </div>
    </div>
  </section>

  <!-- Testimonials Section -->
  <section id="testimonials" class="py-16 px-4 bg-white">
    <div class="max-w-6xl mx-auto">
      <h2 class="text-3xl font-bold text-center text-blue-900 mb-12">T√©moignages</h2>
      <div class="grid md:grid-cols-3 gap-8">
        <div class="bg-gray-50 p-6 rounded-lg">
          <div class="text-yellow-400 mb-4">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="text-gray-600 mb-4">"Service exceptionnel ! J'ai eu des r√©ponses claires et pr√©cises √† toutes mes questions sur mon divorce."</p>
          <div class="font-bold text-blue-900">Marie L.</div>
        </div>
        <div class="bg-gray-50 p-6 rounded-lg">
          <div class="text-yellow-400 mb-4">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="text-gray-600 mb-4">"L'IA r√©pond instantan√©ment et l'acc√®s √† l'avocat m'a fait gagner beaucoup de temps."</p>
          <div class="font-bold text-blue-900">Pierre M.</div>
        </div>
        <div class="bg-gray-50 p-6 rounded-lg">
          <div class="text-yellow-400 mb-4">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="text-gray-600 mb-4">"Parfait pour comprendre les d√©marches de divorce. Service confidentiel et efficace."</p>
          <div class="font-bold text-blue-900">Sophie D.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section id="faq" class="py-16 px-4 bg-gray-50">
    <div class="max-w-4xl mx-auto">
      <h2 class="text-3xl font-bold text-center text-blue-900 mb-12">Questions Fr√©quentes</h2>
      <div class="space-y-6">
        <div class="bg-white p-6 rounded-lg shadow">
          <h3 class="text-lg font-bold text-blue-900 mb-3">Comment fonctionne l'IA juridique ?</h3>
          <p class="text-gray-600">Notre IA est sp√©cialement entra√Æn√©e sur le droit fran√ßais du divorce. Elle peut vous donner des informations g√©n√©rales et vous orienter vers les bonnes proc√©dures.</p>
        </div>
        <div class="bg-white p-6 rounded-lg shadow">
          <h3 class="text-lg font-bold text-blue-900 mb-3">Les informations sont-elles confidentielles ?</h3>
          <p class="text-gray-600">Absolument. Tous vos √©changes sont chiffr√©s et confidentiels. Nous ne partageons aucune information personnelle.</p>
        </div>
        <div class="bg-white p-6 rounded-lg shadow">
          <h3 class="text-lg font-bold text-blue-900 mb-3">Puis-je vraiment parler √† un avocat ?</h3>
          <p class="text-gray-600">Oui, nos abonn√©s ont acc√®s √† des consultations avec des avocats sp√©cialis√©s en divorce √† tarif pr√©f√©rentiel.</p>
      </div>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="py-16 px-4 bg-blue-900 text-white">
    <div class="max-w-4xl mx-auto text-center">
      <h2 class="text-3xl font-bold mb-8">Contactez-Nous</h2>
      <p class="text-xl mb-8">Une question ? Besoin d'aide ? Notre √©quipe est l√† pour vous.</p>
      <div class="grid md:grid-cols-2 gap-8">
        <div>
          <h3 class="text-xl font-bold mb-4">Informations</h3>
          <p class="mb-2">üìß contact@sosdivorce.fr</p>
          <p class="mb-2">üìû 01 23 45 67 89</p>
          <p>üïí Lun-Ven 9h-18h</p>
        </div>
        <div>
          <h3 class="text-xl font-bold mb-4">Support</h3>
          <p class="mb-2">üí¨ Chat en ligne</p>
          <p class="mb-2">üìß support@sosdivorce.fr</p>
          <p>üì± R√©ponse sous 24h</p>
        </div>
      </div>
    </div>
  </section>
  </main>

  <!-- Modal d'authentification -->
  <div id="authModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg p-8 max-w-md w-full">
        <div class="flex justify-between items-center mb-6">
          <h2 id="authTitle" class="text-2xl font-bold text-blue-900">Connexion</h2>
          <button onclick="closeAuthModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
        </div>
        
        <!-- Onglets -->
        <div class="flex mb-6 border-b">
          <button onclick="showAuthModal('login')" id="loginTab" class="flex-1 py-2 px-4 text-center border-b-2 border-blue-600 text-blue-600 font-medium">Connexion</button>
          <button onclick="showAuthModal('register')" id="registerTab" class="flex-1 py-2 px-4 text-center border-b-2 border-transparent text-gray-500 hover:text-gray-700">Inscription</button>
        </div>

        <!-- Message d'erreur/succ√®s -->
        <div id="authMessage" class="hidden mb-4 p-3 rounded"></div>

        <!-- Formulaire de connexion -->
        <form id="loginForm" onsubmit="submitLogin(event)" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
            <input type="email" name="email" required class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Mot de passe</label>
            <input type="password" name="password" required class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <button type="submit" id="loginSubmitBtn" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors">
            Se connecter
          </button>
        </form>

        <!-- Formulaire d'inscription via Tally -->
        <div id="registerForm" class="hidden">
          <iframe 
            src="https://tally.so/embed/mV2yyv?alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=1" 
            width="100%" 
            height="500" 
            frameborder="0" 
            marginheight="0" 
            marginwidth="0" 
            title="Formulaire d'inscription sosdivorce"
            style="border: none;">
          </iframe>
          <script>
            // √âcouter la soumission du formulaire Tally
            window.addEventListener('message', function(event) {
              if (event.data.type === 'tally.form.submit') {
                // Le formulaire a √©t√© soumis avec succ√®s
                showMessage('Inscription r√©ussie ! Vous pouvez maintenant poser des questions illimit√©es.', 'success');
                
                // D√©finir l'utilisateur comme inscrit
                currentUser = { 
                  firstName: 'Utilisateur', 
                  email: 'inscrit@sosdivorce.fr' 
                };
                
                // D√©finir les cookies
                document.cookie = 'registered=1; max-age=31536000; path=/';
                document.cookie = 'q_used=0; max-age=31536000; path=/';
                
                showUserStatus(currentUser);
                
                // Fermer le modal apr√®s 2 secondes
                setTimeout(() => {
                  closeAuthModal();
                }, 2000);
              }
            });
          </script>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-8 px-4">
    <div class="max-w-6xl mx-auto text-center">
      <div class="text-2xl font-bold mb-4">sosdivorce.fr</div>
      <p class="text-gray-400 mb-4">Conseil juridique divorce en ligne avec IA et avocat sp√©cialis√©</p>
      <div class="mt-6 text-sm text-gray-400">
        <p>&copy; 2024 sosdivorce.fr - Tous droits r√©serv√©s</p>
      </div>
    </div>
  </footer>

  <script>
    let currentUser = null;
    let questionsUsed = 0;
    const maxFreeQuestions = 2;

    // V√©rifier le statut utilisateur au chargement
    document.addEventListener('DOMContentLoaded', function() {
      checkUserStatus();
      updateQuestionCounter();
    });

    // V√©rifier le statut de l'utilisateur
    async function checkUserStatus() {
      try {
        const response = await fetch('/api/signup.js', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          credentials: 'include',
          body: JSON.stringify({ action: 'check' })
        });

        const data = await response.json();
        
        if (data.success && data.user) {
          currentUser = data.user;
          showUserStatus(data.user);
        } else {
          hideUserStatus();
        }
      } catch (error) {
        console.error('Erreur v√©rification statut:', error);
        hideUserStatus();
      }
    }

    // Afficher le statut utilisateur
    function showUserStatus(user) {
      document.getElementById('userStatus').classList.remove('hidden');
      document.getElementById('loginBtn').classList.add('hidden');
      document.getElementById('userName').textContent = user.firstName || user.email;
    }

    // Masquer le statut utilisateur
    function hideUserStatus() {
      document.getElementById('userStatus').classList.add('hidden');
      document.getElementById('loginBtn').classList.remove('hidden');
    }

    // Mettre √† jour le compteur de questions
    function updateQuestionCounter() {
      const remaining = maxFreeQuestions - questionsUsed;
      document.getElementById('questionCounter').textContent = 
        `Questions gratuites restantes : ${remaining}`;
    }

    // Afficher le modal d'authentification
    function showAuthModal(type) {
      const modal = document.getElementById('authModal');
      const title = document.getElementById('authTitle');
      const loginForm = document.getElementById('loginForm');
      const registerForm = document.getElementById('registerForm');
      const loginTab = document.getElementById('loginTab');
      const registerTab = document.getElementById('registerTab');
      
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      document.getElementById('authMessage').classList.add('hidden');
      
      if (type === 'login') {
        title.textContent = 'Connexion';
        loginForm.classList.remove('hidden');
        registerForm.classList.add('hidden');
        loginTab.classList.add('border-blue-600', 'text-blue-600');
        loginTab.classList.remove('border-transparent', 'text-gray-500');
        registerTab.classList.remove('border-blue-600', 'text-blue-600');
        registerTab.classList.add('border-transparent', 'text-gray-500');
      } else {
        title.textContent = 'Inscription';
        loginForm.classList.add('hidden');
        registerForm.classList.remove('hidden');
        registerTab.classList.add('border-blue-600', 'text-blue-600');
        registerTab.classList.remove('border-transparent', 'text-gray-500');
        loginTab.classList.remove('border-blue-600', 'text-blue-600');
        loginTab.classList.add('border-transparent', 'text-gray-500');
      }
    }

    // Fermer le modal d'authentification
    function closeAuthModal() {
      document.getElementById('authModal').classList.add('hidden');
      document.body.style.overflow = 'auto';
      document.getElementById('authMessage').classList.add('hidden');
    }

    // Soumettre la connexion
    async function submitLogin(event) {
      event.preventDefault();
      
      const form = event.target;
      const submitBtn = document.getElementById('loginSubmitBtn');
      
      const formData = {
        action: 'login',
        email: form.email.value.trim(),
        password: form.password.value
      };

      submitBtn.disabled = true;
      submitBtn.textContent = 'Connexion...';

      try {
        const response = await fetch('/api/signup.js', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          credentials: 'include',
          body: JSON.stringify(formData)
        });

        const data = await response.json();

        if (data.success) {
          showMessage('Connexion r√©ussie !', 'success');
          currentUser = data.user;
          showUserStatus(data.user);
          setTimeout(() => {
            closeAuthModal();
            form.reset();
          }, 1500);
        } else {
          throw new Error(data.error || data.message);
        }

      } catch (error) {
        showMessage(error.message, 'error');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Se connecter';
      }
    }

    // Soumettre l'inscription (g√©r√© par Tally)
    async function submitRegister(event) {
      // Cette fonction n'est plus utilis√©e car Tally g√®re l'inscription
      // Les inscriptions vont directement dans Google Sheets via Tally
      console.log('Inscription g√©r√©e par Tally');
    }

    // D√©connexion
    async function logout() {
      try {
        await fetch('/api/signup.js', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          credentials: 'include',
          body: JSON.stringify({ action: 'logout' })
        });
        
        currentUser = null;
        hideUserStatus();
        showMessage('D√©connexion r√©ussie', 'success');
      } catch (error) {
        console.error('Erreur de d√©connexion:', error);
      }
    }

    // Afficher un message
    function showMessage(message, type) {
      const messageDiv = document.getElementById('authMessage');
      messageDiv.textContent = message;
      messageDiv.className = `p-3 rounded ${type === 'success' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`;
      messageDiv.classList.remove('hidden');
    }

    // Fonction principale pour poser une question
    async function askGPT() {
      const userInput = document.getElementById('userInput');
      const question = userInput.value.trim();
      
      if (!question) {
        alert('Veuillez saisir une question.');
        return;
      }

      // V√©rifier si l'utilisateur peut poser une question
      if (!currentUser && questionsUsed >= maxFreeQuestions) {
        showAuthModal('register');
        return;
      }

      // Afficher la question de l'utilisateur
      addMessage(question, 'user');
      userInput.value = '';

      // Afficher l'indicateur de chargement
      const loadingId = addMessage('R√©flexion en cours...', 'assistant', true);
      
      // D√©sactiver le bouton
      const sendBtn = document.getElementById('sendBtn');
      const loadingBtn = document.getElementById('loadingBtn');
      sendBtn.classList.add('hidden');
      loadingBtn.classList.remove('hidden');

      try {
        const response = await fetch('/api/chat.js', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          credentials: 'include',
          body: JSON.stringify({ message: question })
        });

        const data = await response.json();

        // Supprimer le message de chargement
        removeMessage(loadingId);

        if (data.success) {
          // Ajouter la r√©ponse avec effet de frappe
          addTypingMessage(data.response);
          
          // Incr√©menter le compteur si utilisateur non connect√©
          if (!currentUser) {
            questionsUsed++;
            updateQuestionCounter();
          }
        } else {
          throw new Error(data.error || 'Erreur lors de la g√©n√©ration de la r√©ponse');
        }

      } catch (error) {
        removeMessage(loadingId);
        addMessage('Erreur: ' + error.message + '. Veuillez r√©essayer.', 'assistant');
      } finally {
        // R√©activer le bouton
        sendBtn.classList.remove('hidden');
        loadingBtn.classList.add('hidden');
      }
    }

    // Ajouter un message au chat
    function addMessage(message, sender, isLoading = false) {
      const chatContainer = document.getElementById('chatContainer');
      const messageDiv = document.createElement('div');
      const messageId = 'msg_' + Date.now();
      
      messageDiv.id = messageId;
      messageDiv.className = `flex ${sender === 'user' ? 'justify-end' : 'justify-start'}`;
      
      const messageContent = document.createElement('div');
      messageContent.className = `max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${
        sender === 'user' 
          ? 'bg-blue-600 text-white' 
          : 'bg-gray-200 text-gray-800'
      }`;
      
      if (isLoading) {
        messageContent.innerHTML = '<span class="typing-cursor">' + message + '</span>';
      } else {
        messageContent.textContent = message;
      }
      
      messageDiv.appendChild(messageContent);
      chatContainer.appendChild(messageDiv);
      
      // Scroll vers le bas
      chatContainer.scrollTop = chatContainer.scrollHeight;
      
      return messageId;
    }

    // Supprimer un message
    function removeMessage(messageId) {
      const message = document.getElementById(messageId);
      if (message) {
        message.remove();
      }
    }

    // Ajouter un message avec effet de frappe
    function addTypingMessage(text) {
      const chatContainer = document.getElementById('chatContainer');
      const messageDiv = document.createElement('div');
      
      messageDiv.className = 'flex justify-start';
      
      const messageContent = document.createElement('div');
      messageContent.className = 'max-w-xs lg:max-w-md px-4 py-2 rounded-lg bg-gray-200 text-gray-800';
      
      messageDiv.appendChild(messageContent);
      chatContainer.appendChild(messageDiv);
      
      // Effet de frappe
      let i = 0;
      const typingInterval = setInterval(() => {
        if (i < text.length) {
          messageContent.innerHTML = text.substring(0, i + 1) + '<span class="typing-cursor">|</span>';
          i++;
        } else {
          messageContent.innerHTML = text;
          clearInterval(typingInterval);
        }
        
        // Scroll vers le bas
        chatContainer.scrollTop = chatContainer.scrollHeight;
      }, 30);
    }

    // Permettre d'envoyer avec Entr√©e
    document.getElementById('userInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        askGPT();
      }
    });
  </script>
</body>
</html>